{% load humanize %}

<h2>Carrito de compras</h2>

<table class="table">
  <thead>
    <tr>
      <th scope="col">#</th>
      <th scope="col">Evento</th>
      <th scope="col">Fecha</th>
      <th scope="col">Valor</th>
      <th scope="col">Cantidad</th>
      <th scope="col">Opciones</th>
    </tr>
  </thead>
  <tbody>
    {% for item in carrito %}
      <tr>
        <th scope="row">{{ forloop.counter }}</th>
        <td>{{ item.evento.nombre }}</td>
        <td>{{ item.evento.fecha }}</td>
        <td>${{ item.evento.precio|intcomma }}</td>
        <td>
          <input type="number" min="1" value="{{ item.cantidad }}" class="form-control" onchange="actualizarCantidad({{ item.evento.id }}, this.value)">
        </td>
        <td>
          <button class="btn btn-danger btn-sm" onclick="eliminarEvento({{ item.evento.id }})">Eliminar</button>
        </td>
      </tr>
    {% empty %}
      <tr>
        <td colspan="6">No hay eventos en el carrito</td>
      </tr>
    {% endfor %}
  </tbody>
</table>

<h2>Resumen del pedido</h2>
<p>Total: ${{ total|intcomma }}</p>

<script>
  function actualizarCantidad(eventoId, cantidad) {
    // Aquí puedes implementar la lógica para actualizar la cantidad del evento en el carrito
  }

  function eliminarEvento(eventoId) {
    // Aquí puedes implementar la lógica para eliminar el evento del carrito
  }
</script>
